!function($,window,document,undefined){"use strict";var WCGS=WCGS||{};WCGS.funcs={},WCGS.vars={onloaded:!1,$body:$("body"),$window:$(window),$document:$(document),is_rtl:$("body").hasClass("rtl"),code_themes:[]},WCGS.helper={uid:function(prefix){return(prefix||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(str){return(str+"").replace(/(\[|\-|\])/g,"\\$1")},name_nested_replace:function($selector,field_id){var checks=[],regex=new RegExp("("+WCGS.helper.preg_quote(field_id)+")\\[(\\d+)\\]","g");$selector.find(":radio").each((function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)})),$selector.each((function(index){$(this).find(":input").each((function(){this.name=this.name.replace(regex,field_id+"["+index+"]"),this.orginal_checked&&(this.checked=!0)}))}))},debounce:function(callback,threshold,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||callback.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,threshold),callNow&&callback.apply(context,args)}},get_cookie:function(name){var e,b,cookie=document.cookie,p=name+"=";if(cookie){if(-1===(b=cookie.indexOf("; "+p))){if(0!==(b=cookie.indexOf(p)))return null}else b+=2;return-1===(e=cookie.indexOf(";",b))&&(e=cookie.length),decodeURIComponent(cookie.substring(b+p.length,e))}},set_cookie:function(name,value,expires,path,domain,secure){var d=new Date;"object"==typeof expires&&expires.toGMTString?expires=expires.toGMTString():parseInt(expires,10)?(d.setTime(d.getTime()+1e3*parseInt(expires,10)),expires=d.toGMTString()):expires="",document.cookie=name+"="+encodeURIComponent(value)+(expires?"; expires="+expires:"")+(path?"; path="+path:"")+(domain?"; domain="+domain:"")+(secure?"; secure":"")},remove_cookie:function(name,path,domain,secure){WCGS.helper.set_cookie(name,"",-1e3,path,domain,secure)}},$.fn.wcgs_clone=function(){for(var base=$.fn.clone.apply(this,arguments),clone=this.find("select").add(this.filter("select")),cloned=base.find("select").add(base.filter("select")),i=0;i<clone.length;++i)for(var j=0;j<clone[i].options.length;++j)!0===clone[i].options[j].selected&&(cloned[i].options[j].selected=!0);return this.find(":radio").each((function(){this.orginal_checked=this.checked})),base},$.fn.wcgs_expand_all=function(){return this.each((function(){$(this).on("click",(function(e){e.preventDefault(),$(".wcgs-wrapper").toggleClass("wcgs-show-all"),$(".wcgs-section").wcgs_reload_script(),$(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")}))}))},$.fn.wcgs_nav_options=function(){return this.each((function(){var $nav=$(this),$links=$nav.find("a"),$hidden=$nav.closest(".wcgs").find(".wcgs-section-id"),$last_section;$(window).on("hashchange",(function(){var hash=window.location.hash.match(new RegExp("tab=([^&]*)")),slug=hash?hash[1]:$links.first().attr("href").replace("#tab=",""),$link=$("#wcgs-tab-link-"+slug);if($link.length>0){$link.closest(".wcgs-tab-depth-0").addClass("wcgs-tab-active").siblings().removeClass("wcgs-tab-active"),$links.removeClass("wcgs-section-active"),$link.addClass("wcgs-section-active"),void 0!==$last_section&&$last_section.hide();var $section=$("#wcgs-section-"+slug);$section.css({display:"block"}),$section.wcgs_reload_script(),$(".wcgs-section").wcgs_reload_script(),$hidden.val(slug),$last_section=$section,$(".toplevel_page_wpgs-settings").hasClass("wp-has-current-submenu")&&$('a[href="admin.php?page=wpgs-settings"]').parent().addClass("current wcgs-active").siblings().removeClass("current wcgs-active")}})).trigger("hashchange")}))},$(document).on("click",".wcgs-tabbed-nav a",(function(event){var gallery_last_open_tab=$(this).attr("id");let hash=window.location.hash;window.location.hash=hash,WCGS.helper.set_cookie("wcgs-gallery-last-open-tab",gallery_last_open_tab)})),$.fn.wcgs_nav_metabox=function(){return this.each((function(){var $nav=$(this),$links=$nav.find("a"),unique_id=$nav.data("unique"),post_id=$("#post_ID").val()||"global",$last_section,$last_link;$links.on("click",(function(e){e.preventDefault();var $link=$(this),section_id=$link.data("section");void 0!==$last_link&&$last_link.removeClass("wcgs-section-active"),void 0!==$last_section&&$last_section.hide(),$link.addClass("wcgs-section-active");var $section=$("#wcgs-section-"+section_id);$section.css({display:"block"}),$section.wcgs_reload_script(),WCGS.helper.set_cookie("wcgs-last-metabox-tab-"+post_id+"-"+unique_id,section_id),$last_section=$section,$last_link=$link}));var get_cookie=WCGS.helper.get_cookie("wcgs-last-metabox-tab-"+post_id+"-"+unique_id);get_cookie?$nav.find('a[data-section="'+get_cookie+'"]').trigger("click"):$links.first("a").trigger("click")}))},$.fn.wcgs_search=function(){return this.each((function(){var $this,$input;$(this).find("input").on("change keyup",(function(){var value=$(this).val(),$wrapper=$(".wcgs-wrapper"),$section,$fields=$wrapper.find(".wcgs-section").find("> .wcgs-field:not(.hidden)"),$titles=$fields.find("> .wcgs-title, .wcgs-search-tags");value.length>3?($fields.addClass("wcgs-hidden"),$wrapper.addClass("wcgs-search-all"),$titles.each((function(){var $title=$(this);if($title.text().match(new RegExp(".*?"+value+".*?","i"))){var $field=$title.closest(".wcgs-field");$field.removeClass("wcgs-hidden"),$field.parent().wcgs_reload_script()}}))):($fields.removeClass("wcgs-hidden"),$wrapper.removeClass("wcgs-search-all"))}))}))},$.fn.wcgs_sticky=function(){return this.each((function(){var $this=$(this),$window=$(window),$inner=$this.find(".wcgs-header-inner"),padding=parseInt($inner.css("padding-left"))+parseInt($inner.css("padding-right")),offset=32,scrollTop=0,lastTop=0,ticking=!1,stickyUpdate=function(){var offsetTop=$this.offset().top,stickyTop=Math.max(32,offsetTop-scrollTop),winWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0);stickyTop<=32&&winWidth>782?($inner.css({width:$this.outerWidth()-padding}),$this.css({height:$this.outerHeight()}).addClass("wcgs-sticky")):($inner.removeAttr("style"),$this.removeAttr("style").removeClass("wcgs-sticky"))},requestTick=function(){ticking||requestAnimationFrame((function(){stickyUpdate(),ticking=!1})),ticking=!0},onSticky=function(){scrollTop=$window.scrollTop(),requestTick()};$window.on("scroll resize",onSticky),onSticky()}))},$.fn.wcgs_dependency=function(){return this.each((function(){var $this=$(this),ruleset=$.wcgs_deps.createRuleset(),depends=[],is_global=!1;$this.children("[data-controller]").each((function(){var $field=$(this),controllers=$field.data("controller").split("|"),conditions=$field.data("condition").split("|"),values=$field.data("value").toString().split("|"),rules=ruleset;$field.data("depend-global")&&(is_global=!0),$.each(controllers,(function(index,depend_id){var value=values[index]||"",condition=conditions[index]||conditions[0];(rules=rules.createRule('[data-depend-id="'+depend_id+'"]',condition,value)).include($field),depends.push(depend_id)}))})),depends.length&&(is_global?$.wcgs_deps.enable(WCGS.vars.$body,ruleset,depends):$.wcgs_deps.enable($this,ruleset,depends))}))},$.fn.wcgs_field_code_editor=function(){return this.each((function(){if("function"==typeof CodeMirror){var $this=$(this),$textarea=$this.find("textarea"),$inited=$this.find(".CodeMirror"),data_editor=$textarea.data("editor");$inited.length&&$inited.remove();var interval=setInterval((function(){if($this.is(":visible")){var code_editor=CodeMirror.fromTextArea($textarea[0],data_editor);if("default"!==data_editor.theme&&-1===WCGS.vars.code_themes.indexOf(data_editor.theme)){var $cssLink=$("<link>");$("#wcgs-codemirror-css").after($cssLink),$cssLink.attr({rel:"stylesheet",id:"wcgs-codemirror-"+data_editor.theme+"-css",href:data_editor.cdnURL+"/theme/"+data_editor.theme+".min.css",type:"text/css",media:"all"}),WCGS.vars.code_themes.push(data_editor.theme)}CodeMirror.modeURL=data_editor.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(code_editor,data_editor.mode),code_editor.on("change",(function(editor,event){$textarea.val(code_editor.getValue()).trigger("change")})),clearInterval(interval)}}))}}))},$.fn.wcgs_field_slider=function(){return this.each((function(){var $this=$(this),$input=$this.find("input"),$slider=$this.find(".wcgs-slider-ui"),data=$input.data(),value=$input.val()||0;$slider.hasClass("ui-slider")&&$slider.empty(),$slider.slider({range:"min",value:value,min:data.min,max:data.max,step:data.step,slide:function(e,o){$input.val(o.value).trigger("change")}}),$input.on("keyup",(function(){$slider.slider("value",$input.val())}))}))},$.fn.wcgs_field_spinner=function(){return this.each((function(){var $this=$(this),$input=$this.find("input"),$inited=$this.find(".ui-spinner-button");$inited.length&&$inited.remove(),$input.spinner({max:$input.data("max")||100,min:$input.data("min")||0,step:$input.data("step")||1,spin:function(event,ui){$input.val(ui.value).trigger("change")}})}))},$.fn.wcgs_field_switcher=function(){return this.each((function(){var $switcher=$(this).find(".wcgs--switcher");$switcher.on("click",(function(){var value=0,$input=$switcher.find("input");$switcher.hasClass("wcgs--active")?$switcher.removeClass("wcgs--active"):(value=1,$switcher.addClass("wcgs--active")),$input.val(value).trigger("change")}))}))},$.fn.wcgs_confirm=function(){return this.each((function(){$(this).on("click",(function(e){var confirm_text=$(this).data("confirm")||window.wcgs_vars.i18n.confirm,confirm_answer=confirm(confirm_text);if(WCGS.vars.is_confirm=!0,!confirm_answer)return e.preventDefault(),WCGS.vars.is_confirm=!1,!1}))}))},$.fn.serializeObject=function(){var obj={};return $.each(this.serializeArray(),(function(i,o){var n=o.name,v=o.value;obj[n]=void 0===obj[n]?v:$.isArray(obj[n])?obj[n].concat(v):[obj[n],v]})),obj},$.fn.wcgs_save=function(){return this.each((function(){var $this=$(this),$buttons=$(".wcgs-save"),$panel=$(".wcgs-options"),flooding=!1,timeout;$this.on("click",(function(e){if(!flooding){var $text=$this.data("save"),$value=$this.val();$buttons.attr("value",$text),$this.hasClass("wcgs-save-ajax")&&(e.preventDefault(),$panel.addClass("wcgs-saving"),$buttons.prop("disabled",!0),window.wp.ajax.post("wcgs_"+$panel.data("unique")+"_ajax_save",{data:$("#wcgs-form").serializeJSONWCGS()}).done((function(response){clearTimeout(timeout);var $result_success=$(".wcgs-form-success");$result_success.empty().append(response.notice).slideDown("fast",(function(){timeout=setTimeout((function(){$result_success.slideUp("fast")}),2e3)})),$(".wcgs-error").remove();var $append_errors=$(".wcgs-form-error");if($append_errors.empty().hide(),Object.keys(response.errors).length){var error_icon='<i class="wcgs-label-error wcgs-error">!</i>';$.each(response.errors,(function(key,error_message){var $field=$('[data-depend-id="'+key+'"]'),$link=$("#wcgs-tab-link-"+($field.closest(".wcgs-section").index()+1)),$tab=$link.closest(".wcgs-tab-depth-0");$field.closest(".wcgs-fieldset").append('<p class="wcgs-text-error wcgs-error">'+error_message+"</p>"),$link.find(".wcgs-error").length||$link.append(error_icon),$tab.find(".wcgs-arrow .wcgs-error").length||$tab.find(".wcgs-arrow").append(error_icon),console.log(error_message),$append_errors.append("<div>"+error_icon+" "+error_message+"</div>")})),$append_errors.show()}$panel.removeClass("wcgs-saving"),$buttons.prop("disabled",!1).attr("value",$value),flooding=!1})).fail((function(response){alert(response.error)})))}flooding=!0}))}))},$.fn.wcgs_checkbox=function(){return this.each((function(){var $this=$(this),$input=$this.find(".wcgs--input"),$checkbox=$this.find(".wcgs--checkbox");$checkbox.on("click",(function(){$input.val(Number($checkbox.prop("checked"))).trigger("change")}))}))},$.fn.wcgs_siblings=function(){return this.each((function(){var $this=$(this),$siblings=$this.find(".wcgs--sibling"),multiple=$this.data("multiple")||!1;$siblings.on("click",(function(){var $sibling=$(this);multiple?$sibling.hasClass("wcgs--active")?($sibling.removeClass("wcgs--active"),$sibling.find("input").prop("checked",!1).trigger("change")):($sibling.addClass("wcgs--active"),$sibling.find("input").prop("checked",!0).trigger("change")):($this.find("input").prop("checked",!1),$sibling.find("input").prop("checked",!0).trigger("change"),$sibling.addClass("wcgs--active").siblings().removeClass("wcgs--active"))}))}))},"function"==typeof Color&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var hex=parseInt(this._color,10).toString(16);if(this.error)return"";if(hex.length<6)for(var i=6-hex.length-1;i>=0;i--)hex="0"+hex;return"#"+hex}),WCGS.funcs.parse_color=function(color){var value=color.replace(/\s+/g,""),trans=-1!==value.indexOf("rgba")?parseFloat(100*value.replace(/^.*,(.+)\)/,"$1")):100,rgba;return{value:value,transparent:trans,rgba:trans<100}},$.fn.wcgs_color=function(){return this.each((function(){var $input=$(this),picker_color=WCGS.funcs.parse_color($input.val()),palette_color=!window.wcgs_vars.color_palette.length||window.wcgs_vars.color_palette,$container;$input.hasClass("wp-color-picker")&&$input.closest(".wp-picker-container").after($input).remove(),$input.wpColorPicker({palettes:palette_color,change:function(event,ui){var ui_color_value=ui.color.toString();$container.removeClass("wcgs--transparent-active"),$container.find(".wcgs--transparent-offset").css("background-color",ui_color_value),$input.val(ui_color_value).trigger("change")},create:function(){$container=$input.closest(".wp-picker-container");var a8cIris=$input.data("a8cIris"),$transparent_wrap=$('<div class="wcgs--transparent-wrap"><div class="wcgs--transparent-slider"></div><div class="wcgs--transparent-offset"></div><div class="wcgs--transparent-text"></div><div class="wcgs--transparent-button button button-small">transparent</div></div>').appendTo($container.find(".wp-picker-holder")),$transparent_slider=$transparent_wrap.find(".wcgs--transparent-slider"),$transparent_text=$transparent_wrap.find(".wcgs--transparent-text"),$transparent_offset=$transparent_wrap.find(".wcgs--transparent-offset"),$transparent_button=$transparent_wrap.find(".wcgs--transparent-button");"transparent"===$input.val()&&$container.addClass("wcgs--transparent-active"),$transparent_button.on("click",(function(){"transparent"!==$input.val()?($input.val("transparent").trigger("change").removeClass("iris-error"),$container.addClass("wcgs--transparent-active")):($input.val(a8cIris._color.toString()).trigger("change"),$container.removeClass("wcgs--transparent-active"))})),$transparent_slider.slider({value:picker_color.transparent,step:1,min:0,max:100,slide:function(event,ui){var slide_value=parseFloat(ui.value/100);a8cIris._color._alpha=slide_value,$input.wpColorPicker("color",a8cIris._color.toString()),$transparent_text.text(1===slide_value||0===slide_value?"":slide_value)},create:function(){var slide_value=parseFloat(picker_color.transparent/100),text_value=slide_value<1?slide_value:"";$transparent_text.text(text_value),$transparent_offset.css("background-color",picker_color.value),$container.on("click",".wp-picker-clear",(function(){a8cIris._color._alpha=1,$transparent_text.text(""),$transparent_slider.slider("option","value",100),$container.removeClass("wcgs--transparent-active"),$input.trigger("change")})),$container.on("click",".wp-picker-default",(function(){var default_color=WCGS.funcs.parse_color($input.data("default-color")),default_value=parseFloat(default_color.transparent/100),default_text=default_value<1?default_value:"";a8cIris._color._alpha=default_value,$transparent_text.text(default_text),$transparent_slider.slider("option","value",default_color.transparent)})),$container.on("click",".wp-color-result",(function(){$transparent_wrap.toggle()})),$("body").on("click.wpcolorpicker",(function(){$transparent_wrap.hide()}))}})}})}))},$.fn.wcgs_field_group=function(){return this.each((function(){var $this=$(this),$fieldset=$this.children(".wcgs-fieldset"),$group=$fieldset.length?$fieldset:$this,$wrapper=$group.children(".wcgs-cloneable-wrapper"),$hidden=$group.children(".wcgs-cloneable-hidden"),$max=$group.children(".wcgs-cloneable-max"),$min=$group.children(".wcgs-cloneable-min"),field_id=$wrapper.data("field-id"),is_number=Boolean(Number($wrapper.data("title-number"))),max=parseInt($wrapper.data("max")),min=parseInt($wrapper.data("min"));$wrapper.hasClass("ui-accordion")&&$wrapper.find(".ui-accordion-header-icon").remove();var update_title_numbers=function($selector){$selector.find(".wcgs-cloneable-title-number").each((function(index){$(this).html($(this).closest(".wcgs-cloneable-item").index()+1+".")}))};$wrapper.accordion({header:"> .wcgs-cloneable-item > .wcgs-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",beforeActivate:function(event,ui){var $panel=ui.newPanel,$header=ui.newHeader;if($panel.length&&!$panel.data("opened")){var $fields=$panel.children(),$first=$fields.first(),$title=$header.find(".wcgs-cloneable-value");$fields.on("change keyup",(function(event){setTimeout((function(){$fields.each((function(){if($(this).hasClass("wcgs_layout")){var $group_title=$(this).find("option:selected").html();$title.text($group_title)}}))}),300)}))}},icons:{header:"wcgs-cloneable-header-icon sp_wgs-icon-angle-right",activeHeader:"wcgs-cloneable-header-icon sp_wgs-icon-angle-down"},activate:function(event,ui){var $panel=ui.newPanel,$header=ui.newHeader;if($panel.length&&!$panel.data("opened")){var $fields=$panel.children(),$first=$fields.first(),$title=$header.find(".wcgs-cloneable-value");$fields.on("change keyup",(function(event){setTimeout((function(){$fields.each((function(){if($(this).hasClass("wcgs_layout")){var $group_title=$(this).find("option:selected").html();$title.text($group_title)}}))}),300)})),$panel.wcgs_reload_script(),$panel.data("opened",!0),$panel.data("retry",!1)}else $panel.data("retry")&&($panel.wcgs_reload_script_retry(),$panel.data("retry",!1))}}),$wrapper.sortable({axis:"y",handle:".wcgs-cloneable-title,.wcgs-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(event,ui){$wrapper.accordion({active:!1}),$wrapper.sortable("refreshPositions"),ui.item.children(".wcgs-cloneable-content").data("retry",!0)},update:function(event,ui){WCGS.helper.name_nested_replace($wrapper.children(".wcgs-cloneable-item"),field_id),is_number&&update_title_numbers($wrapper)}}),$group.children(".wcgs-cloneable-add").on("click",(function(e){e.preventDefault();var count=$wrapper.children(".wcgs-cloneable-item").length;if($min.hide(),max&&count+1>max)tb_show("","#TB_inline?&width=440&height=225&inlineId=BuyProPopupContent");else{var $cloned_item=$hidden.wcgs_clone(!0);$cloned_item.removeClass("wcgs-cloneable-hidden"),$cloned_item.find(':input[name!="_pseudo"]').each((function(){this.name=this.name.replace("___","").replace(field_id+"[0]",field_id+"["+count+"]")})),$wrapper.append($cloned_item),$wrapper.accordion("refresh"),$wrapper.accordion({active:count}),is_number&&update_title_numbers($wrapper)}}));var event_clone=function(e){e.preventDefault();var count=$wrapper.children(".wcgs-cloneable-item").length;if($min.hide(),max&&count+1>max)$max.show();else{var $this,$parent=$(this).parent().parent(),$cloned_helper=$parent.children(".wcgs-cloneable-helper").wcgs_clone(!0),$cloned_title=$parent.children(".wcgs-cloneable-title").wcgs_clone(),$cloned_content=$parent.children(".wcgs-cloneable-content").wcgs_clone(),$cloned_item=$('<div class="wcgs-cloneable-item" />');$cloned_item.append($cloned_helper),$cloned_item.append($cloned_title),$cloned_item.append($cloned_content),$wrapper.children().eq($parent.index()).after($cloned_item),WCGS.helper.name_nested_replace($wrapper.children(".wcgs-cloneable-item"),field_id),$wrapper.accordion("refresh"),is_number&&update_title_numbers($wrapper)}};$wrapper.children(".wcgs-cloneable-item").children(".wcgs-cloneable-helper").on("click",".wcgs-cloneable-clone",event_clone),$group.children(".wcgs-cloneable-hidden").children(".wcgs-cloneable-helper").on("click",".wcgs-cloneable-clone",event_clone),setTimeout((function(){$group.find(".wcgs-cloneable-item:not(.wcgs-cloneable-hidden)").each((function(){var $header,$title=$(this).find(".wcgs-cloneable-title").find(".wcgs-cloneable-value"),$group_title=$(this).find(".wcgs_layout option:selected").html();$title.text($group_title)}))}),100)}))},$.fn.wcgs_field_tabbed=function(){return this.each((function(){var $this=$(this),$links=$this.find(".wcgs-tabbed-nav a"),$sections=$this.find(".wcgs-tabbed-section");$sections.eq(0).wcgs_reload_script(),$links.on("click",(function(e){e.preventDefault();var $link=$(this),index=$link.index(),$section=$sections.eq(index);$link.addClass("wcgs-tabbed-active").siblings().removeClass("wcgs-tabbed-active"),$section.wcgs_reload_script(),$section.removeClass("hidden").siblings().addClass("hidden")}))}))},$.fn.wcgs_chosen=function(){return this.each((function(){var $this=$(this),$inited=$this.parent().find(".chosen-container"),is_sortable=$this.hasClass("wcgs--sortable")||!1,is_ajax=$this.hasClass("wcgs-chosen-ajax")||!1,is_multiple=$this.attr("multiple")||!1,set_width=is_multiple?"100%":"auto",set_options=$.extend({allow_single_deselect:!0,disable_search_threshold:10,width:set_width,no_results_text:window.wcgs_vars.i18n.no_results_text},$this.data("chosen-settings"));if($inited.length&&$inited.remove(),is_ajax){var set_ajax_options=$.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:window.wcgs_vars.i18n.typing_text,searching_text:window.wcgs_vars.i18n.searching_text,no_results_text:window.wcgs_vars.i18n.no_results_text},$this.data("chosen-settings"));$this.WCGSAjaxChosen(set_ajax_options)}else $this.chosen(set_options);if(is_multiple){var $hidden_select=$this.parent().find(".wcgs-hide-select"),$hidden_value=$hidden_select.val()||[];$this.on("change",(function(obj,result){if(result&&result.selected){if($this.parents(".wcgs-field").hasClass("assign_product_terms")||$this.parents(".wcgs-field").hasClass("wcgs_specific_product")){var selectedOptions=$(this).val();if(selectedOptions&&selectedOptions.length>1)return tb_show("","#TB_inline?&width=440&height=225&inlineId=BuyProPopupContent"),selectedOptions.pop(),void $(this).val(selectedOptions).trigger("chosen:updated")}$hidden_select.append('<option value="'+result.selected+'" selected="selected">'+result.selected+"</option>")}else result&&result.deselected&&$hidden_select.find('option[value="'+result.deselected+'"]').remove();$hidden_select.trigger("change")})),$this.WCGSChosenOrder($hidden_value,!0)}if(is_sortable){var $chosen_container,$chosen_choices=$this.parent().find(".chosen-container").find(".chosen-choices");$chosen_choices.on("mousedown",(function(event){$(event.target).is("span")&&event.stopPropagation()})),$chosen_choices.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,ui){ui.placeholder.width(ui.item.innerWidth()),ui.placeholder.height(ui.item.innerHeight())},update:function(e,ui){var select_options="",chosen_object=$this.data("chosen"),$prev_select=$this.parent().find(".wcgs-hide-select");$chosen_choices.find(".search-choice-close").each((function(){var option_array_index=$(this).data("option-array-index");$.each(chosen_object.results_data,(function(index,data){data.array_index===option_array_index&&(select_options+='<option value="'+data.value+'" selected>'+data.value+"</option>")}))})),$prev_select.children().remove(),$prev_select.append(select_options),$prev_select.trigger("change")}})}}))},$.fn.wcgs_number=function(){return this.each((function(){$(this).on("keypress",(function(e){if(0!==e.keyCode&&8!==e.keyCode&&45!==e.keyCode&&46!==e.keyCode&&(e.keyCode<48||e.keyCode>57))return!1}))}))},$.fn.wcgs_help=function(){return this.each((function(){var $this=$(this),$tooltip,offset_left,$class="";$this.on({mouseenter:function(){$this.find(".wcgs-support").length>0&&($class="support-tooltip"),$tooltip=$('<div class="wcgs-tooltip '+$class+'"></div>').html($this.find(".wcgs-help-text").html()).appendTo("body"),offset_left=WCGS.vars.is_rtl?$this.offset().left-$tooltip.outerWidth():$this.offset().left+36;var $top=$this.offset().top-($tooltip.outerHeight()/2-14);$this.find(".wcgs-support").length>0&&($top=$this.offset().top+46,offset_left=$this.offset().left-249),$tooltip.css({top:$top,left:offset_left,textAlign:"left"})},mouseleave:function(){void 0!==$tooltip&&($tooltip.is(":hover")||$tooltip.remove())}}),$("body").on("mouseleave",".wcgs-tooltip",(function(){void 0!==$tooltip&&$tooltip.remove()}))}))},$.fn.wcgs_customizer_refresh=function(){return this.each((function(){var $this=$(this),$complex=$this.closest(".wcgs-customize-complex");if($complex.length){var $input=$complex.find(":input"),$unique=$complex.data("unique-id"),$option=$complex.data("option-id"),obj=$input.serializeObjectWCGS(),data=$.isEmptyObject(obj)?"":obj[$unique][$option],control=wp.customize.control($unique+"["+$option+"]");control.setting._value=null,control.setting.set(data)}else $this.find(":input").first().trigger("change");$(document).trigger("wcgs-customizer-refresh",$this)}))},$.fn.wcgs_customizer_listen=function(options){var settings=$.extend({closest:!1},options);return this.each((function(){if(void 0!==window.wp.customize){var $this=settings.closest?$(this).closest(".wcgs-customize-complex"):$(this),$input=$this.find(":input"),unique_id=$this.data("unique-id"),option_id=$this.data("option-id");void 0!==unique_id&&$input.on("change keyup",WCGS.helper.debounce((function(){var obj=$this.find(":input").serializeObjectWCGS();!$.isEmptyObject(obj)&&obj[unique_id]&&window.wp.customize.control(unique_id+"["+option_id+"]").setting.set(obj[unique_id][option_id])}),250))}}))},$(document).on("expanded",".control-section",(function(){var $this=$(this);if($this.hasClass("open")&&!$this.data("inited")){var $fields=$this.find(".wcgs-customize-field"),$complex=$this.find(".wcgs-customize-complex");$fields.length&&($this.wcgs_dependency(),$fields.wcgs_reload_script({dependency:!1}),$complex.wcgs_customizer_listen()),$this.data("inited",!0)}})),WCGS.vars.$window.on("resize wcgs.resize",WCGS.helper.debounce((function(event){var window_width;(navigator.userAgent.indexOf("AppleWebKit/")>-1?WCGS.vars.$window.width():window.innerWidth)<=782&&!WCGS.vars.onloaded&&($(".wcgs-section").wcgs_reload_script(),WCGS.vars.onloaded=!0)}),200)).trigger("wcgs.resize"),$.fn.wcgs_reload_script_retry=function(){return this.each((function(){var $this=$(this)}))},$.fn.wcgs_reload_script=function(options){var settings=$.extend({dependency:!0},options);return this.each((function(){var $this=$(this);$this.data("inited")||($this.children(".wcgs-field-code_editor").wcgs_field_code_editor(),$this.children(".wcgs-field-slider").wcgs_field_slider(),$this.children(".wcgs-field-switcher:not(.pro_switcher)").wcgs_field_switcher(),$this.children(".wcgs-field-group").wcgs_field_group(),$this.children(".wcgs-field-border").find(".wcgs-color").wcgs_color(),$this.children(".wcgs-field-color").find(".wcgs-color").wcgs_color(),$this.children(".wcgs-field-color_group").find(".wcgs-color").wcgs_color(),$this.children(".wcgs-field-dimensions").find(".wcgs-number").wcgs_number(),$this.children(".wcgs-field-dimensions_res").find(".wcgs-number").wcgs_number(),$this.children(".wcgs-field-slider").find(".wcgs-number").wcgs_number(),$this.children(".wcgs-field-spacing").find(".wcgs-number").wcgs_number(),$this.children(".wcgs-field-spinner").find(".wcgs-number").wcgs_number(),$this.children(".wcgs-field-select").find(".wcgs-chosen").wcgs_chosen(),$this.children(".wcgs-field-checkbox").find(".wcgs-checkbox").wcgs_checkbox(),$this.children(".wcgs-field-button_set").find(".wcgs-siblings").wcgs_siblings(),$this.children(".wcgs-field-image_select").find(".wcgs-siblings").wcgs_siblings(),$this.children(".wcgs-field-tabbed").wcgs_field_tabbed(),$this.children(".wcgs-field").find(".wcgs-help").wcgs_help(),$(".wcgs-admin-header").find(".wcgs-support-area").wcgs_help(),settings.dependency&&$this.wcgs_dependency(),$this.data("inited",!0),$(document).trigger("wcgs-reload-script",$this))}))},$(".spwg_shortcode .wcgs-fieldset input").on("click",(function(e){$(this).select(),document.execCommand("copy"),$(".spwg_shortcode .wcgs-fieldset").append('<div style="display: none;color:green;" class="wcgs-alert">Copied!</div>'),setTimeout(()=>{$(".wcgs-alert").fadeIn(200)},100),setTimeout(()=>{$(".wcgs-alert").fadeOut(200)},1e3),setTimeout(()=>{$(".wcgs-alert").remove()},1500)})),$(document).ready((function(){$(".wcgs-save").wcgs_save(),$(".wcgs-confirm").wcgs_confirm(),$(".wcgs-nav-options").wcgs_nav_options(),$(".wcgs-nav-metabox").wcgs_nav_metabox(),$(".wcgs-expand-all").wcgs_expand_all(),$(".wcgs-search").wcgs_search(),$(".wcgs-sticky-header").wcgs_sticky(),$(".wcgs-onload").wcgs_reload_script(),setTimeout(()=>{var wcgs_open_tab_cookie=WCGS.helper.get_cookie("wcgs-gallery-last-open-tab");null!==wcgs_open_tab_cookie&&wcgs_open_tab_cookie.length>2&&($(document).find("#"+wcgs_open_tab_cookie).trigger("click"),$(".wcgs-section").wcgs_reload_script())},200);var checkedOptions=[];$('.wcgs-section input[name*="gallery_layout"]:checked').each((function(){checkedOptions.push($(this).val())})),checkedOptions.includes("hide_thumb")?$("#thumbnails-navigation").addClass("wcgs-hide"):$("#thumbnails-navigation").removeClass("wcgs-hide"),$(".gallery_layout").on("change",(function(){setTimeout((function(){var checkedOptions=[];$('.wcgs-section input[name*="gallery_layout"]:checked').each((function(){checkedOptions.push($(this).val())})),checkedOptions.includes("hide_thumb")?$("#thumbnails-navigation").addClass("wcgs-hide"):$("#thumbnails-navigation").removeClass("wcgs-hide")}),100)}))})),$("label:contains((Pro))").css({"pointer-events":"none"}),$("label:contains((Pro)) input, .pro_spinner input, .pro_checkbox input,.pro_dimensions option").attr("disabled",!0),$("label:contains((Pro)) input, .pro_spinner input,.pro_dimensions option").css("opacity","0.8"),$("select option:contains((Pro))").attr("disabled",!0).css("opacity","0.8"),$(".pro_only_slider .wcgs-slider-ui").slider({disabled:!0}),$(".pro_only_slider input").attr({disabled:!0,value:1.5}).css("opacity","0.8");var selectedValue=$(".zoom_type").find("input:checked").val();"in_side"==selectedValue?$(".zoom_type").find(".wcgs-text-desc").css("opacity",0):($(".zoom_type").find(".wcgs-text-desc").css("opacity",1),"right_side"==selectedValue?($(".zoom_type").find(".wcgs-text-desc span").html("Right Side Zoom"),$(".zoom_type").find(".wcgs-text-desc").css("opacity",1)):($(".zoom_type").find(".wcgs-text-desc span").html("Magnific Zoom"),$(".zoom_type").find(".wcgs-text-desc").css("opacity",1))),$(".zoom_type").on("change",(function(){var _this=$(this);setTimeout(()=>{var selectedValue=_this.find("input:checked").val();"in_side"==selectedValue?_this.find(".wcgs-text-desc").css("opacity",0):"right_side"==selectedValue?(_this.find(".wcgs-text-desc span").html("Right Side Zoom"),_this.find(".wcgs-text-desc").css("opacity",1)):(_this.find(".wcgs-text-desc span").html("Magnific Zoom"),_this.find(".wcgs-text-desc").css("opacity",1))},100)}));var slider_height_type=$(".slider_height_type").find("input:checked").val(),postCount;("adaptive"==slider_height_type||"max_image"==slider_height_type?$(".slider_height_type").find(".wcgs-text-desc").css("opacity",0):$(".slider_height_type").find(".wcgs-text-desc").css("opacity",1),$(".slider_height_type").on("change",(function(){var _this=$(this);setTimeout(()=>{var slider_height_type=_this.find("input:checked").val();"adaptive"==slider_height_type||"max_image"==slider_height_type?_this.find(".wcgs-text-desc").css("opacity",0):_this.find(".wcgs-text-desc").css("opacity",1)},100)})),$(document).on("keyup change","#wcgs-form",(function(e){var $button;e.preventDefault(),$(this).find(".wcgs-save.wcgs-save-ajax").css({"background-color":"#00C263","pointer-events":"initial"}).val("Save Settings")})),$(document).on("click change","#wcgs-form .wcgs-cloneable-helper, #wcgs-form .wcgs-cloneable-helper .sp_wgs-icon-clone, #wcgs-form .wcgs-cloneable-helper .sp_wgs-icon-drag-and-drop, .wcgs-cloneable-add",(function(e){var $button;e.preventDefault(),$("#wcgs-form").find(".wcgs-save.wcgs-save-ajax").css({"background-color":"#00C263","pointer-events":"initial"}).val("Save Settings")})),setTimeout(()=>{0==$("#wcgs-section-assign_layout .wcgs-cloneable-wrapper .wcgs-cloneable-item").length&&$("#wcgs-section-assign_layout .wcgs-cloneable-add").length>0&&$("#wcgs-section-assign_layout .wcgs-cloneable-add").trigger("click")},500),$(".wcgs-save").on("click",(function(e){e.preventDefault(),$(this).css({"background-color":"#C5C5C6","pointer-events":"none","padding-left":"38px"}).val("Changes Saved")})),$("body").hasClass("post-type-wcgs_layouts"))&&($("div").hasClass("wcgs-wrapper")&&$(".page-title-action").on("click",(function(e){e.preventDefault();var postCount=$("#the-list tr.type-wcgs_layouts").length;tb_show("","#TB_inline?&width=440&height=225&inlineId=BuyProPopupContent")})),$("#the-list tr").length>=1&&$("#BuyProPopupContent").length&&$(".page-title-action").on("click",(function(e){e.preventDefault();var postCount=$("#the-list tr.type-wcgs_layouts").length;tb_show("","#TB_inline?&width=440&height=225&inlineId=BuyProPopupContent")})));var wcgs_offset=0,batchSize=50,totalMigratedCount=0,wcgs_migration_from="",$wcgs_nonce=$("#wcgs_options_noncewcgs_settings").val();function runMigrationBatch(){$.post(ajaxurl,{action:"wcgs_run_migration",offset:wcgs_offset,limit:50,plugin:wcgs_migration_from,nonce:$wcgs_nonce},(function(response){if(response.success){const batchMigrated=response.data.batch_migrated;totalMigratedCount+=batchMigrated,response.data.continue?(wcgs_offset+=50,runMigrationBatch()):(totalMigratedCount>0?$("."+wcgs_migration_from+" .wcgs-text-desc").append(`<span>Migrated ${totalMigratedCount} variations successfully!</span>`):$("."+wcgs_migration_from+" .wcgs-text-desc").append("<span>No variation data found for migration.</span>").addClass("wcgs-text-desc-no-data"),$("."+wcgs_migration_from+" .wcgs--button").prop("disabled",!1).text("Migrate Now").css({"background-color":"#2271b1","pointer-events":"default"}),setTimeout(()=>{$("."+wcgs_migration_from+" .wcgs-text-desc").html("")},3e3))}else $("#wcgs-migration-result").html('<span style="color:red;">Migration failed.</span>')}))}$(".wcgs_migration_button .wcgs--button").on("click",(function(e){e.preventDefault(),wcgs_migration_from=$(this).find("input").data("depend-id"),$(this).prop("disabled",!0).text("Migrating...").css({"background-color":"#245a85c9","pointer-events":"none"}),wcgs_offset=0,totalMigratedCount=0,runMigrationBatch()}));var $export_type=$(".wcgs_what_export").find("input:checked").val();function isValidJSONString(str){try{JSON.parse(str)}catch(e){return!1}return!0}function handleLastValidInputSelection(baseName){const nameSettings=`wcgs_settings[${baseName}]`,nameMetabox=`wcgs_metabox[${baseName}]`,$settingsInputs=$(`input[name="${nameSettings}"]`),$metaboxInputs=$(`input[name="${nameMetabox}"]`),$allInputs=$settingsInputs.add($metaboxInputs),$submitTriggers=$("#publishing-action #publish, .wcgs-buttons .wcgs-save-ajax");let lastValidSettingsValue=$settingsInputs.filter(":checked").val(),lastValidMetaboxValue=$metaboxInputs.filter(":checked").val();function updateLastValidSelection($input){if(!$input.is(":disabled")){const value=$input.val();$input.is(`[name="${nameSettings}"]`)&&(lastValidSettingsValue=value),$input.is(`[name="${nameMetabox}"]`)&&(lastValidMetaboxValue=value)}}function revertInvalidSelection(){$settingsInputs.filter(":checked:disabled").length&&$settingsInputs.filter(`[value="${lastValidSettingsValue}"]`).prop("checked",!0),$metaboxInputs.filter(":checked:disabled").length&&$metaboxInputs.filter(`[value="${lastValidMetaboxValue}"]`).prop("checked",!0)}$allInputs.on("change",(function(){updateLastValidSelection($(this))})),$submitTriggers.on("click",revertInvalidSelection)}$(".wcgs_what_export").on("change",(function(){$export_type=$(this).find("input:checked").val()})),setTimeout(()=>{$(".wcgs_export .wcgs-fieldset,.wcgs_import .wcgs-fieldset").each((function(){$(this).append('<p class="success-notice"></p>')}))},600),$(".wcgs_export .wcgs--button").on("click",(function(event){event.preventDefault();var $layout_ids=$(".wcgs_post_ids select").val(),$ex_nonce=$("#wcgs_options_noncewcgs_settings").val(),selected_layout="selected_layouts"===$export_type?$layout_ids:"all_layouts",data={};if(console.log($export_type),"all_layouts"===$export_type||"selected_layouts"===$export_type)data={action:"wcgs_export_layouts",wcgs_ids:selected_layout,nonce:$ex_nonce};else{if("global_setting"!==$export_type)return $(".wcgs-field-button_set.wcgs_export .wcgs-fieldset p.success-notice").text("No layout selected.").show(),void setTimeout((function(){$(".wcgs-field-button_set.wcgs_export .wcgs-fieldset p.success-notice").hide().text("")}),3e3);data={action:"wcgs_export_layouts",wcgs_ids:"global_settings",nonce:$ex_nonce}}$.post(ajaxurl,data,(function(resp){if(resp){if(isValidJSONString(resp))var json=JSON.stringify(JSON.parse(resp));else var json=JSON.stringify(resp);json=[json];var blob=new Blob(json),link=document.createElement("a"),wcgs_time=$.now();link.href=window.URL.createObjectURL(blob),link.download="woo-gallery-export-"+wcgs_time+".json",link.click(),$(".wcgs-field-button_set.wcgs_export .wcgs-fieldset p.success-notice").text("Exported successfully!").show(),setTimeout((function(){$(".wcgs-field-button_set.wcgs_export .wcgs-fieldset p.success-notice").hide().text(""),$(".wcgs_post_ids select").val("").trigger("chosen:updated")}),3e3)}}))})),$(".wcgs_import button.import").on("click",(function(event){event.preventDefault();var $this=$(this),wcgs_shortcodes=$("#import").prop("files")[0];if(""!=$("#import").val()){var $im_nonce=$("#wcgs_options_noncewcgs_settings").val(),reader=new FileReader;reader.readAsText(wcgs_shortcodes),reader.onload=function(event){var jsonObj=JSON.stringify(event.target.result);$this.append('<span class="wcgs-page-loading-spinner"><i class="sp_wgs-icon-spin6" aria-hidden="true"></i></span>'),$this.css("opacity","0.7"),$.ajax({url:ajaxurl,type:"POST",data:{layout:jsonObj,action:"wcgs_import_layouts",nonce:$im_nonce},success:function(resp){$(".wcgs-field-button_set.wcgs_import .wcgs-fieldset p.success-notice").html("Imported successfully!").show(),$this.html("Import").css("opacity","1"),setTimeout((function(){if($(".wcgs-field-button_set.wcgs_import .wcgs-fieldset p.success-notice").hide().text(""),$("#import").val(""),resp.data.import){var cleanUrl=window.location.href.split("#")[0];window.location.href=cleanUrl}else window.location.replace($("#wcgs_shortcode_link_redirect").attr("href"))}),2e3)}})}}else $(".wcgs-field-button_set.wcgs_import .wcgs-fieldset p").text("No exported json file chosen.").show(),setTimeout((function(){$(".wcgs-field-button_set.wcgs_import .wcgs-fieldset p").hide().text("")}),3e3)})),handleLastValidInputSelection("video_icon"),handleLastValidInputSelection("slider_height_type"),handleLastValidInputSelection("pagination_type")}(jQuery,window,document);